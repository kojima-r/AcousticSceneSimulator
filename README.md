# 音環境シミュレーションのスクリプト
## 初期設定
最初に一度だけ実行し，必要なディレクトリを生成したり，ライブラリをダウンロードする．

```
sh ./init.sh
```

## シミュレーションの際のマイクの位置や音源の位置を指定する設定ファイル setting.json/setting_3d.json

```json

{
    "mics": [
        {
            "name": "_m1",
            "position": [
                0,
                0
            ]
        }
    ],
    "sources": [
        {
            "channel": 0,
            "file": "./data/ca6/CAVI017.wav",
            "name": "s0",
            "position": [
                10.0,
                0.0
            ],
            "start_time": 0.0
        }
    ]
}

```

"mics":マイクロフォンアレイの情報
マイクロフォンのリストを格納しており，
各マイクロフォンは以下の情報を持つ

- "name": マイクロフォンアレイの名前（接尾辞として利用される）
- "position":マイクロフォンアレイの位置

"sources":音源の情報
音源のリストを格納しており，
各音源は以下の情報を持つ
- "name": 音源の名前
- "file": 音源ファイル（wav）
- "channel": 音源ファイルのどのチャネルを使うか（音源は１チャネルのみのため，wavファイルが複数チャネル持つ場合にはちチャネルを一つ指定する必要がある）
- "position": 音源の位置
- "start_time": 音源の再生開始時間

３次元用の場合は"mics"と"sources"の position を高さ方向を加えた３次元で指定してください．

## シミュレーションの実行

### 2次元の場合

```python
python build_sim_dataset.py tf/tamago_rectf.zip  0.5
```

=> data_sim/以下にシミュレーションによって収録されたファイルが生成される．
第二引数は環境雑音（ホワイトノイズ）の割合（指定しない場合は0.1）．
値は音源の最大振幅に対する割合を指定する．

# 3d

```python
python build_sim_dataset_3d.py tf/dacho_geotf_3d.zip 0.5
```

=> data_sim_3d/以下にシミュレーションによって収録されたファイルが生成される．
第二引数は環境雑音（ホワイトノイズ）の割合（指定しない場合は0.1）．
値は音源の最大振幅に対する割合を指定する．
